$(window).on("load",function(){var pathname=window.location.pathname;ref=window.location.href;if(pathname=='/otp'||pathname=='/basic-details-1'||pathname=='/basic-details-2'||pathname=='/confirm-basic-details'||pathname=='/congratulations-elev8'||pathname=='/el-intro'||pathname=='/personal-professional-details'||pathname=='/bankdetails-salary'||pathname=='/elevate'){var customer_id=document.getElementById("firebase_analicts").value;}
if(pathname=='/'){firebase.analytics().logEvent('web_1_view_sf_register',{"page":"register","campaign":"STF"});}else if(pathname=='/otp'){firebase.analytics().logEvent('web_2_view_sf_otp',{"page":"otp","campaign":"STF"});}else if(pathname=='/basic-details-1'){firebase.analytics().setUserProperties({customer_id:customer_id});firebase.analytics().logEvent('web_3_view_sf_basic_details_1',{"page":"basic_details_1","campaign":"STF"});}else if(pathname=='/basic-details-2'){firebase.analytics().setUserProperties({customer_id:customer_id});firebase.analytics().logEvent('web_4_view_sf_basic_details_2',{"page":"basic_details_2","campaign":"STF"});}else if(pathname=='/confirm-basic-details'){firebase.analytics().setUserProperties({customer_id:customer_id});firebase.analytics().logEvent('web_4_view_sf_confirm_basic_details',{"page":"confirm_basic_details","campaign":"STF"});}else if(pathname=='/check-eligibility'){firebase.analytics().logEvent('web_5_view_sf_check_eligibility',{"page":"check_eligibility","campaign":"STF"});}else if(pathname=='/congratulations-elev8'){firebase.analytics().setUserProperties({customer_id:customer_id});firebase.analytics().logEvent('web_elv8_1_view_congratulations',{"page":"elv8-congratulations","campaign":"STF"});}else if(pathname=='/el-intro'){firebase.analytics().setUserProperties({customer_id:customer_id});firebase.analytics().logEvent('web_elv8_2_view_el_intro',{"page":"elv8-intro","campaign":"STF"});}else if(pathname=='/personal-professional-details'){firebase.analytics().setUserProperties({customer_id:customer_id});firebase.analytics().logEvent('web_elv8_3_view_personal_professional_detail',{"page":"personal-professional-detail","campaign":"STF"});}else if(pathname=='/bankdetails-salary'){firebase.analytics().setUserProperties({customer_id:customer_id});firebase.analytics().logEvent('web_elv8_4_view_elevate',{"page":"elevate","campaign":"STF"});}else if(pathname=='/elevate'){firebase.analytics().setUserProperties({customer_id:customer_id});firebase.analytics().logEvent('web_elv8_5_view_elevate',{"page":"elevate","campaign":"STF"});}else{firebase.analytics().logEvent("web_1_view_sf_default",{"page":"Home","UTM":"Stashfin",});}});$("body").on("change","#frm_register input[name=chk_refferal]",function(e){e.preventDefault();var ref=$("#frm_register");ref.find('input[name=referral_code]').val('');if($(this).is(':checked')){ref.find('.referral-code-textbox').removeClass('d-none');}else{ref.find('.referral-code-textbox').addClass('d-none');}});$("body").on("focusout","#frm_register input[name=phone]",function(e){var ref=$('#frm_register');var phone_number=$.trim(ref.find("input[name=phone]").val());if(phone_number.length>=1&&phone_number.length!=10){show_err_input(ref,"phone","*Invalid mobile number (start with 6, 7, 8, 9)");}else if(phone_number.length>=1&&!phone_number.match(regexMobileN)){show_err_input(ref,"phone","*Invalid mobile number (start with 6, 7, 8, 9)");}});$("body").on("submit","#frm_register",function(e){e.preventDefault();var ref=$('#frm_register');var meta_data=localStorage.getItem('Y29weXZhbHVl');var data={"name":$.trim(ref.find("input[name=name]").val()),"phone":$.trim(ref.find("input[name=phone]").val()),"salary":$.trim(ref.find("input[name=salary]").val()),"city":$.trim(ref.find("input[name=city]").val()),"chk_refferal":ref.find("input[name=chk_refferal]:checked").val(),"referral_code":$.trim(ref.find("input[name=referral_code]").val()),"utm_source":$.trim(ref.find("input[name=utm_source]").val()),"deep_link_code":$.trim(ref.find("input[name=deep_link_code]").val()),"utm_medium":$.trim(ref.find("input[name=utm_medium]").val()),"utm_url":$.trim(ref.find("input[name=utm_url]").val()),"utm_content":$.trim(ref.find("input[name=utm_content]").val()),"utm_term":$.trim(ref.find("input[name=utm_term]").val()),"utm_campaign":$.trim(ref.find("input[name=utm_campaign]").val()),"extra_params":$.trim(ref.find("input[name=pub_id]").val()),"recaptcha":$.trim(ref.find("[name=g-recaptcha-response]").val()),"whatsapp_notification":ref.find("input[name=whatsapp_chk]:checked").val(),"check_status":1,"version":"v2","meta_data":"{"+meta_data+"}",};if(data.whatsapp_notification=='on'){data.whatsapp_notification=1;}else{data.whatsapp_notification=0;}
hide_all_err(ref,"error-class","err_margin_0");hide_ajax_error(ref,"response","response-error","response-success");ref.find(".g-recaptcha").siblings(".error-class").text("");ref.find(".g-recaptcha").siblings(".error-class").css("display","");ref.find(".g-recaptcha").siblings(".error-class").removeClass("err_margin_0");if(data.name==''){show_err_input(ref,"name","*Required");data.check_status=0;}else if(data.name.match(regexName)){show_err_input(ref,"name","*Invalid name. (Alphabet only)");data.check_status=0;}
if(data.phone==''){show_err_input(ref,"phone","*Required");data.check_status=0;}else if(!data.phone.match(regexMobileN)||data.phone.length!=10){show_err_input(ref,"phone","*Invalid mobile number (start with 6, 7, 8, 9)");data.check_status=0;}
if(data.salary==''){show_err_input(ref,"salary","*Required");data.check_status=0;}else if(data.salary.match(regexNumber)){show_err_input(ref,"salary","*Invalid salary (Number only)");data.check_status=0;}
if(data.city==''){show_err_input(ref,"city","*Required");data.check_status=0;}else if(data.city.match(regexName)){show_err_input(ref,"city","*Invalid city");data.check_status=0;}
if(data.chk_refferal!=undefined&&data.referral_code==''){show_err_input(ref,"referral_code","*Required");data.check_status=0;}else if(data.chk_refferal!=undefined&&(data.referral_code.match(regexAlphaNumeric))){show_err_input(ref,"referral_code","*Invalid referral code.");data.check_status=0;}
if(ref.find("input[name=tnc]").is(":checked")!=true){show_err_input(ref,"tnc","*Please accept terms & conditions");data.check_status=0;}
if(data.recaptcha==''){ref.find(".g-recaptcha").siblings(".error-class").text("Captcha required");ref.find(".g-recaptcha").siblings(".error-class").css("display","block");ref.find(".g-recaptcha").siblings(".error-class").addClass("err_margin_0");data.check_status=0;}
if(data.check_status==1){firebase.analytics().logEvent('web_1_btn_sf_register',{"page":"register","campaign":"STF"});var info=getBrowser();data.browser=info.browser;data.device=info.device;data.user_agent=info.user_agent;$.ajax({url:base_url+'register',data:data,type:'POST',beforeSend:function(){ref.find(".ajaxloader").css("display","inline-block");},success:function(response){response=$.parseJSON(response);if(response.http_code==200){window.location.href=base_url+"otp";}else{ajax_error_message(ref,"response",response.message);}},error:function(){ajax_error_message(ref,"response","Something wrong. Please try again later");},complete:function(){ref.find(".ajaxloader").css("display","none");grecaptcha.reset();}});}});$("body").on("click","#frm_otp #resend_otp",function(e){e.preventDefault();hide_all_err($("#frm_otp"),"error-class","err_margin_0");hide_ajax_error($("#frm_otp"),"response","response-error","response-success")
if($("#resend_otp").find(".resend-timer").text()==''){var data={"version":"v2"}
send_otp($("#frm_otp"),data,"resend-link");}});$("#frm_otp").submit(function(e){e.preventDefault();ref=$(this);var data={"otp1":$.trim(ref.find("input[name=otp1]").val()),"otp2":$.trim(ref.find("input[name=otp2]").val()),"otp3":$.trim(ref.find("input[name=otp3]").val()),"otp4":$.trim(ref.find("input[name=otp4]").val()),"resend_otp_flag":ref.find("#resend_otp").attr('data-val')};hide_all_err(ref,"error-class","err_margin_0");hide_ajax_error(ref,"response","response-error","response-success")
var otp={"otp":data.otp1+data.otp2+data.otp3+data.otp4,"version":"v2","resend_otp_flag":data.resend_otp_flag};if(data.otp1==''||data.otp2==''||data.otp3==''||data.otp4==''){ajax_error_message(ref,"response","Please enter OTP");}else if(otp.otp.length!=4){ajax_error_message(ref,"response","Please enter OTP");}else if(!$.isNumeric(otp.otp)){ajax_error_message(ref,"response","Invalid OTP");}else{firebase.analytics().logEvent('web_2_btn_sf_otp',{"page":"otp","campaign":"STF"});$.ajax({url:base_url+"submitOtp",type:'post',data:otp,beforeSend:function(){ref.find(".ajaxloader").css("display","inline-block");},success:function(response){response=$.parseJSON(response);if(response.http_code==200){var checkDsaPhone=getParams(window.location.href);if(checkDsaPhone['dsa_phone']){ajax_success_message(ref,"response",response.message);$.ajax({url:base_url+'logout',success:function(){window.location.href=base_url;}});}else{window.location.href=base_url+response.landing_page;}}else{ajax_error_message(ref,"response",response.message);}},error:function(){ajax_error_message(ref,"response","Something wrong. Please try again later");},complete:function(){ref.find(".ajaxloader").css("display","none");}});}});$(window).on("load",function(){var ref=$("#frm_otp");if(ref.length>0){var checkDsaPhone=getParams(window.location.href);if(checkDsaPhone['dsa_phone']){var data={}
send_otp($("#frm_otp"),data,"resend-link");}
var myTimer=setInterval(myClock,1000);var c=59;var timer=0;function myClock(){timer++;var remain=c-timer;$('.timer').css('color',"#807c7c");$('.timer').css('pointer-events',"none");if(remain<10){$('.timer').text("OTP sent (0"+remain+")");}else{$('.timer').text("OTP Sent ("+remain+")");}
if(remain==0){$('.timer').hide();if(!checkDsaPhone['dsa_phone']){$('#skipButton').show();}
$('#resend_otp').show();clearInterval(myTimer);}}}});$("body").on("click","#skipButton",function(e){e.preventDefault();$('#skipButton').css('pointer-event',"none");var ref=$(this);var phone=$('#mobile-number-display').text();hide_all_err(ref,"error-class","err_margin_0");hide_ajax_error(ref,"response","response-error","response-success");if(phone==''){ajax_error_message(ref,"response","Please enter Phone Number");}else if(phone.length!=10){ajax_error_message(ref,"response","Please enter Phone Number");}else if(!$.isNumeric(phone)){ajax_error_message(ref,"response","Invalid Phone");}else{$.ajax({url:base_url+"skipOtp",type:'post',data:{'phone':phone},beforeSend:function(){ref.find(".ajaxloader").css("display","inline-block");},success:function(response){response=$.parseJSON(response);if(response.http_code==200){ajax_success_message(ref,"response",response.message);window.location.href=base_url+response.landing_page;}else{ajax_error_message(ref,"response",response.message);loginExpired(response.message);}},error:function(){ajax_error_message(ref,"response","Something wrong. Please try again later");},complete:function(){ref.find(".ajaxloader").css("display","none");}});}});$(window).scroll(function(){var s=$(this).scrollTop();var h=$(this).height();if(s>h){$(".top-arrow").css("display","block");}else{$(".top-arrow").css("display","none");}});$("#scrollTop").click(function(){$('html, body').animate({scrollTop:0},800);return false;});var didScroll;var lastScrollTop=0;var delta=1;var navbarHeight=$('#custom-header-fixed').outerHeight();$(window).scroll(function(event){didScroll=true;});setInterval(function(){if(didScroll){hasScrolled();didScroll=false;}},1);function hasScrolled(){var st=$(this).scrollTop();if(Math.abs(lastScrollTop-st)<=delta)
return;if(st>lastScrollTop&&st>navbarHeight){$('#custom-header-fixed').removeClass('fixed-top').addClass('no-fixed-top');}else{if(st+$(window).height()<$(document).height()){$('#custom-header-fixed').removeClass('no-fixed-top').addClass('fixed-top');}}
lastScrollTop=st;}
$("body").on("click","#frm_register input[name=tnc]",function(e){var ref=$("#frm_register");var data={"salary":$.trim(ref.find("input[name=salary]").val()),"activeLoan":ref.find("input[name=activeLoan]:checked").val(),"outgoingEMIs":$.trim(ref.find("input[name=outgoingEMIs]").val()),};if(data.salary!=''&&(data.activeLoan==1||data.activeLoan=='on')&&data.outgoingEMIs!=''&&offer_amount>0){ref.find(".ongoing-emi-offer").css("display","block");}});